<html>
<head>
  <title>Collections and Amortization</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308919 (en-US, MWS); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="536"/>
<h1>Collections and Amortization</h1>

<div>
<span><div><div><span style="font-size: 16pt;">Data Types in the Abstract</span></div><ul><li><div>Generally, the <span style="font-weight: bold;">implementation</span> of data structures, search, etc. in Java is <span style="font-weight: bold;">irrelevant</span></div></li><li><div>What's <span style="font-weight: bold;">important</span> is their <span style="font-weight: bold;">specification</span></div></li><li><div>Java has a bunch of standard types in java.util to represent collections of Objects</div></li><ul><li><div>6 Interfaces</div></li><ul><li><div><span style="text-decoration: underline;">Collection</span>: General collections of items</div></li><li><div><span style="text-decoration: underline;">List</span>: Indexed Sequences with duplication</div></li><li><div><span style="text-decoration: underline;">Set</span>, <span style="text-decoration: underline;">Sorted Set</span>: Collections without duplication</div></li><li><div><span style="text-decoration: underline;">Map</span>, <span style="text-decoration: underline;">SortedMap</span>: Dictionaries (Key --&gt; Value)</div></li></ul><li><div>Concrete classes the provide actual instances: <span style="text-decoration: underline;">LinkedList</span>, <span style="text-decoration: underline;">ArrayList</span>, <span style="text-decoration: underline;">HashSet</span>, <span style="text-decoration: underline;">TreeSet</span></div></li><li><div><span style="text-decoration: underline;"><img src="Collections and Amortization_files/Image.png" type="image/png" data-filename="Image.png" width="478"/></span></div></li></ul></ul><div><span style="font-size: 16pt;">The Collection Interface</span></div><ul><li><div>Main functions promised</div></li><ul><li><div>Membership tests: contains(), containsAll()</div></li><li><div>Other queries: size(), isEmpty()</div></li><li><div>Retrieval: iterator, toArray()</div></li><li><div><span style="font-weight: bold;">Optional</span> modifiers, add(), addAll(), clear(), remove(), removeAll()</div></li><ul><li><div>Some implementations may throw a <span style="text-decoration: underline;">UnsupportedOperationException</span> if the modifier can't be used</div></li></ul></ul></ul><div><span style="font-size: 16pt;">The List interface</span></div><ul><li><div><span style="text-decoration: underline;">Extends Collection</span></div></li><li><div>Represents <span style="font-weight: bold;">indexed sequences</span></div></li><li><div>Adds new methods to Collections</div></li><ul><li><div>Membership Tests: indexOf(), lastIndexOf()</div></li><li><div>Retrieval: get(i), listIterator(), sublist(B, E);</div></li><li><div>Modifiers: add(i) and addAll(i) to say <span style="font-weight: bold;">where</span> to add new element. Same for removal operations</div></li><li><div>ListIterator&lt;Item&gt; extends Iterator&lt;Item&gt;</div></li><ul><li><div>Adds previous() and hasPrevious()</div></li><li><div>add(), remove(), and set(), iterate through a list, manipulating as it moves</div></li></ul></ul></ul><div><span style="font-size: 16pt;">Implementing Lists: ArrayList</span></div><ul><li><div>The main concrete types in the Java library of List are <span style="font-weight: bold;">ArrayList</span> and <span style="font-weight: bold;">LinkedList</span></div></li><li><div>ArrayList uses an array to hold data, when the array becomes too large, a new (larger) array is created and previous values are copied into it</div></li></ul><div><font style="font-size: 16pt;">Expanding Vectors Efficiently</font></div><ul><li><div>When using an array for expanding sequence, it's best to <span style="font-weight: bold;">double</span> the size of the array to grow it</div></li><ul><li><div>Incrementing the size by 1 eventually takes time Θ(N<span style="vertical-align: super;">2</span>) because elements must be copied every time a new array is made</div></li><li><div>Doubling the size (or multiplying by any constant factor) takes time Θ(N) because elements are only copied once</div></li></ul></ul><div><font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">Amortized Time</span></font> - The cost of the program is spread out, time is averaged amongst a large data set</div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col><col style="width: 130px;"></col></colgroup><tbody><tr><td style="width: 130px; padding: 8px; border: 1px solid;">To Insert Item #</td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Resizing Cost</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Cumulative Cost</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Resizing Cost per Item</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>Array Size after Insertions</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>1</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>1</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>1</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>4</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>6</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>4</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>3</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>6</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>1.5</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>4</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>4</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>8</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>14</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2.8</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>8</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>5</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>14</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2.33</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>8</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>7</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>14</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>1.75</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>8</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>8</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>16</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>30</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>3.33</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>16</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>15</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>30</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>1.88</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>16</div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super;">m</span> + 1 to 2<span style="vertical-align: super;">m+1</span> -1</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>0</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super; font-size: smaller; font-size: smaller;">m+2</span> -2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>~2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super;">m+1</span></div></td></tr><tr><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super;">m+1</span></div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super;">m+2</span></div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super;">m+3</span> -2</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>~4</div></td><td style="width: 130px; padding: 8px; border: 1px solid;"><div>2<span style="vertical-align: super;">m+2</span></div></td></tr></tbody></table><div><br/></div></div><div><font style="font-size: 14pt;">Analogy: Bank Balance</font></div><ul><li><div>Amortized Cost --&gt; Deposits, Real Cost --&gt; Withdrawals</div></li><li><div>We &quot;deposit&quot; a set amount of &quot;time&quot; for every operation and &quot;withdraw&quot; once for adding a new element; when we have to double the array, we &quot;withdraw&quot; the amount it takes to double the size of the array</div></li><li><div>Here, the &quot;bank balance&quot; always stays non-negative</div></li></ul><div><font style="font-size: 12pt;">As long as you don't increment by 1 every time, <span style="text-decoration: underline;">ArrayLists</span> are <span style="font-weight: bold;">just as efficient</span> as <span style="text-decoration: underline;">LinkedLists</span></font></div><div style="margin-left: 40px;">This is <span style="font-weight: bold;">not</span> as true for inserting in the <span style="font-weight: bold;">middle</span> of an array, LinkedLists will always be more efficient</div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 